!function(u) {
    "use strict";
    u.ajaxChimp = {
        responses: {
            0: "Merci ! Vous vous êtes inscrit avec succès.", // Message de succès
            1: "Veuillez entrer une valeur.",
            2: "Une adresse email doit contenir un seul @.",
            3: "La portion de domaine de l'adresse email est invalide (la portion après le @ : ).",
            4: "La portion nom d'utilisateur de l'adresse email est invalide (la portion avant le @ : ).",
            5: "Cette adresse email semble fausse ou invalide. Veuillez entrer une adresse email réelle."
        },
        init: function(a, s) { u(a).ajaxChimp(s) }
    },
    u.fn.ajaxChimp = function(e) {
        return u(this).each(function(a, s) {
            var i = u(s),
                r = i.find("input[type=email]"),
                t = i.find("label[for=" + r.attr("id") + "]"),
                l = u.extend({ url: i.attr("action"), language: "fr" }, e),
                o = l.url.replace("/post?", "/post-json?").concat("&c=?");
            i.attr("novalidate", "true"),
            r.attr("name", "EMAIL"),
            i.submit(function() {
                var n = {}, a = i.serializeArray();
                u.each(a, function(a, s) { n[s.name] = s.value }),
                u.ajax({
                    url: o,
                    data: n,
                    success: function(s) {
                        var e;
                        if ("success" === s.result) {
                            e = u.ajaxChimp.responses[0]; // Message de succès
                            t.removeClass("error").unwrap().wrap("<div class='success'></div>");
                            r.removeClass("error").addClass("valid");
                        } else {
                            e = s.msg; // Gérer d'autres messages d'erreur
                            r.removeClass("valid").addClass("error");
                            t.removeClass("valid").unwrap().wrap("<div class='error'></div>");
                        }
                        t.html(e), // Utiliser le message ici
                        t.show(),
                        l.callback && l.callback(s)
                    },
                    dataType: "jsonp",
                    error: function(a, s) { console.log("mailchimp ajax submit error: " + s) }
                });
                return !1; // Empêche le rechargement de la page
            })
        }), this
    }
}(jQuery);

(function($) {
    "use strict";

    $("#mailchimp").find(".newsletter-field").first().attr("id", "newsletter_field");
    $("#subscribe-result").html("<label for='newsletter_field'></label>");
    $("#mailchimp").ajaxChimp({
        url: "https://github.us22.list-manage.com/subscribe/post?u=097cdc25effba38fa0d026e17&id=9decea46b3&f_id=0090d7e1f0" // Remplacez ceci par l'URL de votre liste Mailchimp.
    });

})(jQuery);
